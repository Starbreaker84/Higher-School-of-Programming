## 47. Императивное программирование-2

**47.1. Цикл while**

Команда

```
while условие do выражение 
```

вычисляет выражение до тех пор, пока условие истинно.

Результат работы while -- значение () типа unit.

```
let x = ref 1
while ! x < 10 do
   x := ! x + 1
! x = 10 // true
```

**47.2. Императивные функции для работы с коллекциями**

Функция List.iter применяет императивную функцию (первый параметр) к каждому элементу списка (второй параметр) и возвращает значение типа unit.

Главное в List.iter -- это возможность использования побочных эффектов в императивной функции.

```
let mutable sum = 0
let f x = sum <- sum + x
List.iter f [2; 3; 5]
sum = 10 // 2+3+5
```

Функция List.iteri использует такие же параметры, как и функция List.iter, только при вызове императивной функции передаёт ей первым параметром индекс, последовательно увеличивающийся на единицу, начиная с 0, а очередной элемент списка поступает вторым параметром.

```
let mutable sum = 0
let f i x = sum <- sum + i * x
List.iteri f [1; 2; 3] 
sum = 8 // 0*1 + 1*2 + 2*3
```

**47.3. Массивы**

Массивы (тип Array) -- это своеобразный аналог списка фиксированного размера, элементы которого мутабельны (значения их могут изменяться).

Элементы массива заключаются в логические скобки [| |].

```
let arr = [| 1; 2; 3 |]
```

Для массива, как и для списка, можно задавать диапазоны.

```
let arr = [| 1 .. 10 |]
```

Доступ к конкретному элементу массива по его индексу выполняется с помощью индексатора .[ ] .

```
let arr = [| 1 .. 10 |]
let x = arr.[ 0 ]
arr.[ 0 ] <- x + 10
arr.[ 0 ] = 11 // true
```

Длина массива определяется функцией length.

```
Array.length(arr) = 10 // true
```

К значениям Array применены также изученные ранее функции ofList, toList, map, iter, iteri, fold, foldBack.

**47.4. Задания**

47.4.1. Напишите функцию факториала f: int -> int, не используя рекурсию, с помощью императивных возможностей.

47.4.2. Напишите функцию fibo: int -> int, где fibo(n) вычисляет n-е число Фибоначчи (n >= 0), не используя рекурсию, с помощью императивных возможностей.
Последовательность Фибоначчи начинается с двух значений 0,1, а n-й элемент равен сумме n-1 - го и n-2 - го элементов: 0,1,1,2,3,5,8,13,...

Шаблон для отправки на сервер:

```
// 47.4.1
let f n = ...

// 47.4.2
let fibo n = ...
```

**[[ предыдущее ]](https://skillsmart.ru/fp/fsh/a95275a417.html)**
