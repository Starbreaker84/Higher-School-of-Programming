### Управление инкапсуляцией

Принцип управления инкапсуляцией в объектно-ориентированном языке заключается в ограничении доступа к атрибутам и методам класса в соответствии с требованиями архитектуры приложения. Каждый член класса дополнительно уточняется областью видимости.

Область видимости -- это та часть кода программы, в которой атрибут или метод виден, т.е. к нему можно получить доступ, указав его имя. Обычно область видимости статически определяется структурой программы. Она также может быть определена динамически, а именно во время выполнения, хотя на практике такой подход почти не применяется.

Языки программирования обычно фиксируют область видимости по умолчанию для каждого члена класса при его объявлении, которая может быть изменена с помощью специальных ключевых слов. Обычно используются public, private и protected. К сожалению, разные языки используют эти слова для определения разных схем видимости.

### Универсальная схема видимости членов класса.

Наиболее фундаментальные формы видимости -- это private и public.

**Приватный (private)** член класса виден только внутри объекта (экземпляра класса). Но он доступен также и внутри всех классов-наследников.

**Публичный (public)** член класса виден где угодно в программе.

**Защищённый (protected)** член класса виден только внутри объекта, и не доступен в классах-наследниках.

Хорошая схема, когда атрибуты по умолчанию приватны, и методы по умолчанию публичны.

Подход с приватными и публичными членами естественен, когда мы используем классы для конструирования АТД.

- Класс -- это "инкремент". АТД существует сам по себе, со своими собственными атрибутами и методами. Класс же, который физически "конструирует" АТД в программе, представляет АТД как инкрементальную модификацию своих суперклассов.
- Атрибуты АТД приватны -- невидимы за его пределами, так как АТД формально задаётся только своими операциями (методами).
- Методы определяют внешний интерфейс АТД, поэтому они должны быть видны всем сущностям, заинтересованным в данном АТД. Соответственно, их видимость публична.

### Конструирование иных видимостей

Техники управления инкапсуляцией в коде основаны в основном на двух концепциях: лексической видимости и использовании имён. Приватная и публичная области видимости могут быть легко реализованы с помощью этих двух концепций. Однако многие другие формы видимости также могут быть выражены с их помощью: например, private и protected в C++ и Java, а также гораздо более сложные политики безопасности.

Основная техника заключается в том, чтобы  **позволить заголовкам методов быть именами как значениями** , а не просто жёстко заданными атомами. Имя -- это неизменяемая константа; единственный способ узнать имя -- это получить ссылку на него. Таким образом, программа может передавать ссылку на имя контролируемым образом, именно в те области программы, в которых имя должно быть видно.

По этой причине атомы не являются безопасными: если третья сторона узнает программное представление атома (либо угадав, либо каким-то другим способом), то сможет вызвать соответствующий метод. Имена как значения -- это простой способ устранить такую утечку безопасности. Однако современные языки программирования (Java, C#, C++) поддерживают только атомы в качестве имён (текстовые "константы" в коде, которые обрабатывает компилятор), поэтому в них добавляются специальные инструкции (protected, private) для явного ограничения видимости.

При создании большой программы атомы выигрывают как в плане простоты кода, так и по фактору психологического комфорта во время разработки, потому что "ссылочная" работа со значениями имён методов, конечно, существенно затрудняет понимание. Однако и у значений имён есть свои преимущества, так как их видимость может легко контролироваться динамически, что исключает конфликты наследования, и управление инкапсуляцией становится более простым, поскольку ссылка на объект теперь не имеет права просто так вызвать любой его метод. В результате в программе как раз становится меньше ошибок, и она лучше структурируется, хотя и усилий на её разработку потребуется побольше. Однако это решается хорошим синтаксическим сахаром -- например, явным синтаксическим разделением имён-атомов и имён-значений и удобными средствами работы с ними.


### Управление инкапсуляцией

======= 18. При использовании классов для конструирования АТД естественно, когда ...

[ ] атрибуты по умолчанию приватны, и методы по умолчанию приватны

[ ] атрибуты по умолчанию публичны, и методы по умолчанию публичны

[1 ] атрибуты по умолчанию приватны, и методы по умолчанию публичны

[ ] атрибуты по умолчанию публичны, и методы по умолчанию приватны

======= 19. Какая концепция лишняя в техниках управления инкапсуляцией?

[ ] использование имён

[ 1] использование атомов

[ ] лексическая видимость

======= 20. Основная техника управления инкапсуляцией -- это ...

[ ] позволить заголовкам методов быть именами как атомами

[ ] позволить заголовкам методов быть ссылками

[ 1] позволить заголовкам методов быть именами как значениями
