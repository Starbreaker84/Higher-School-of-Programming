## Ошибки и исключительные ситуации

Насколько корректно в коде использовать инструкции контроля за исключительными ситуациями? В целом предлагаемый стиль ООП контринтуитивно подразумевает избегание такого контроля в коде.

Но что делать, если функция потенциально может отработать ошибочно? Например, если функция ввода целого числа с клавиатуры получает некорректное значение, и завершается ошибкой, то что она должна возвращать? Надо ли например в таком случае формировать внутри неё исключение?

**С помощью команд и запросов мы определяем абстрактную вычислительную модель работы с состоянием объекта (машину состояний)**. При таком подходе функция, которая может возвращать как основное значение, так и некоторый признак ошибки (плохой способ реализации такого подхода -- возвращать null как признак, что что-то пошло не так), переделывается в команду. Её результат и статус (отработано нормально или возникла такая-то ошибка) выдаются двумя разными запросами. Такая схема часто реализуется, когда надо организовать взаимодействие с внешним миром (ввести значение с клавиатуры, из файла или базы, получить по сети и т. д.), которому возможные ошибки присущи по определению.

*Здесь возможна рекурсивная проблема: если запрашивается результат для функции, которая ещё не срабатывала, то что запрос должен возвращать? Если он возвращает некоторое значение по умолчанию, а программист забыл проверить статус функции (в данном случае статус вернётся ошибочный: функция ещё не вызывалась), то это значение по умолчанию продолжит использоваться далее как верное. Вот в таких вторичных ситуациях вполне возможно генерировать исключение изнутри запроса результата, если сам результат пока не определён (что определяется внутри этого запроса вызовом запроса статуса).*

На практике далеко не во всех случаях удаётся проконтролировать работу методов через последующие запросы статуса их выполнения. Вполне вероятны ситуации, когда какие-то внешние сбои (на уровне операционной системы или аппаратной части) приведут к достаточно глобальным искажениям, для реагирования на которые простого контроля за статусом последнего метода недостаточно. Возможно, и какие-то программистские ошибки в коде могут теоретически приводить к достаточно серьёзным последствиям, которые потенциально допускать нельзя. Наконец, и сам разработчик при реализации сложной логики может заранее добавлять обработчики исключений.

Рекомендация в целом такая, что **с явной обработкой исключений в коде спешить не надо**. Лучше использовать по максимуму возможности стандартных библиотек, где нередко присутствуют "страховочные" версии различных типовых функций. Например, функция преобразования строки в число может завершаться исключением, если строка в неправильном формате, однако страховочная версия такой функции возникновения ошибки не допустит, и предложит расширенную диагностику своей работы, включая коды возможных ошибок.
Но если такой возможности нету, а ситуация явно подозрительная, тогда надо добавлять обработчики исключительных ситуаций.
