## Рекурсивные типы данных

### 25. Списки различий (Difference lists)

**Список различий** -- это пара списков, которые связаны друг с другом так: второй список может быть получен из первого удалением нуля или большего числа элементов из первого списка. Список различий записывается в виде этих двух списков, разделённых #.

Например, [a]#[a] или [a,b,c,d]#[c,d]. Список различий можно отобразить в обычный список, если из хвоста первого списка удалить элементы второго списка. То есть [a]#[a] отображается в [], а [a,b,c,d]#[c,d] в [a,b].

Списки различий -- это частный случай структур различий. **Структуры различий** -- это пары значений, в которых второе значение встроено в первое значение. Структура различий репрезентует значение, равное первой структуре минус вторая структура. Структуры различий позволяют легко конструировать итеративные вычисления над самыми разными рекурсивными структурами (списками, деревьями, ...). В свою очередь структуры различий -- это частные случаи аккумуляторов (когда нам требуется сразу писать итеративный код).

Особенность списков различий в том, что **их хвосты могут быть неопределённы** (хранят в самом конце неопределённую переменную). Например, имеются списки (a|b|c|X)#X и (d|e|f|Y)#Y, где X и Y -- неопределённые переменные (не связанные со значением). Тогда, если мы захотим сложить эти списки, то сможем сделать это за константное время O(1) независимо от их длины. В данном случае мы просто проинициализируем переменную X вторым списком (ссылкой на него), и получим (a|b|c|d|e|f|Y)#Y. Но за такую эффективность приходится расплачиваться: например, подобное сложение можно выполнить лишь один раз, так как первый список фактически перестаёт существовать (неопределённая переменная получит значение).

Списки различий были определены в языке логического программирования Пролог и служат основной для множества техник программирования в этом языке. Как программистская концепция, список различий находится где-то между концепцией значения и концепцией состояния: он имеет все характеристики значения (программы, использующие его, будут декларативными) и при этом предлагает мощность состояния, потому что их можно складывать за константное время.


### Списки различий (задания)

======= 57. В списке различий ...

[ ]первый список может быть получен удалением элементов из второго списка

[ ]второй список может быть получен добавлением элементов из первого списка

[x]второй список может быть получен удалением элементов из первого списка

[ ]первый список может быть получен добавлением элементов из второго списка

======= 58. Структуры различий -- это пары значений, в которых ...

[X] второе значение встроено в первое значение

[ ] первое значение встроено во второе значение

[ ] оба значения рекурсивно встроены друг в друга

======= 59. Cписки различий полезны, потому что ...

[X] они декларативны, и обрабатываются за O(1)

[ ] сложение списков можно выполнять многократно за O(1)

[ ] позволяют использовать неопределённые переменные
