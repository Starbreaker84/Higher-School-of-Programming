### Динамическое секционирование

Проблема 76. Фиксированное количество секций с фиксированными границами весьма неудобно: если задать границы неправильно, то может возникнуть ситуация, когда все данные находятся в одной секции, а остальные секции пусты.

Решение. Такие СУБД, как HBase, где происходит секционирование по диапазонам значений ключа, создают секции динамически. Когда размер секции перерастает заданный (в HBase размер по умолчанию -- 10 Гбайт), она разбивается на две секции таким образом, чтобы примерно половина данных оказалась в одной, а половина в другой. И наоборот, если значительное количество данных удаляется, и секция становится меньше порогового значения, то её можно слить с соседней секцией.

Каждая секция относится к какому-либо узлу. После разбиения большой секции одну из частей можно переместить в другой узел, чтобы сбалансировать нагрузку.


### Динамическое секционирование

Проблема 77. Пустая БД начинается с одной секции, и пока набор данных невелик, до момента разбиения первой секции все операции записи обрабатываются одним узлом, в то время как все остальные узлы простаивают.

Решение. В таких СУБД, как HBase и MongoDB, можно задавать начальный набор секций для пустой БД ( **предварительное разбиение -- pre-splitting** ).


### Динамическое секционирование

Проблема 78. При динамическом секционировании количество секций пропорционально размеру набора данных. При фиксированном количестве секций размер каждой секции пропорционален размеру набора данных. В обоих случаях количество секций не зависит от количества узлов, но хотелось бы учитывать тот факт, что больший объем данных требует для хранения большего количества узлов.

Решение. В СУБД Cassandra например, количество секций пропорционально количеству узлов: на каждый узел приходится фиксированное количество секций. Размеры всех секций растут пропорционально размеру набора данных, если количество узлов остается неизменным. А при увеличении количества узлов секции снова уменьшаются.

При добавлении в кластер нового узла случайным образом выбирается фиксированное количество существующих секций для разбиения, после чего новый узел забирает по половине каждой из разбиваемых секций, оставляя вторые половины на месте.


### Динамическое секционирование (задания)

======= 65. Динамическое секционирование подразумевает, что ...

[ ] секции могут перемещаться между узлами целиком

[ ] секции могут разбиваться на части, но эти части (новые секции) остаются на том же узле

[1 ] секции могут разбиваться на части, и эти части (новые секции) могут распределяться между разными узлами

======= 66. Пустую БД правильнее начинать ...

[ ] с нуля секций

[ ] с одной секции

[ 1] с явно заданного набора секций

======= 67. При динамическом секционировании ... (выберите неверное утверждение)

[1] размер секций пропорционален размеру набора данных

[] количество секций пропорционально размеру набора данных

[ ] количество секций пропорционально числу узлов
