### 32. Инстанцирование

Инстанцирование (возможность возврата процедурного значения как результата вызова процедуры) реализуется как правило с помощью так называемых  **фабрик или генераторов функций** .
Прямая возможность "производить" функцию поддерживается далеко не во всех языках, хотя и существуют различные обходные пути для этого.

Например, есть универсальная функция сортировки списка, когда конкретный алгоритм сортировки ("реализацию") мы передаём в такую функцию-фабрику, и получаем на выходе функцию, применяющую нужный алгоритм сортировки. Таким образом мы можем на лету менять реализацию, выбирать более продуктивные схемы сортировки под конкретную задачу, и при этом обходиться без довольно сложных и неочевидных паттернов императивно-объектного проектирования.

```
function FactoryOp(Op)
    function inner(x,y)
        return Op(x,y)
    end
end

function Add(a,b)
    return a+b
end

f = FactoryOp(Add) # f - это функция, созданная "на лету"

println( f(2,3) )
```


### 33. Встраивание

Встраивание -- это техника, когда мы не формируем полную структуру данных за один раз, при обращении к любому её элементу, а строим её постепенно, по мере запросов, как бы "встраивая" внутрь неё программный код, генерирующий нужные данные.

Например, если требуется список из миллиона линейно увеличивающихся чисел, и запрашивается самый первый элемент, то достаточно сгенерировать список только из этого одного элемента. Такая схема вычислений называется **ленивой** в противоположность  **жадной** , когда сразу вычисляется всё.


### Инстанцирование и встраивание (задания)

======= 72. Инстанцирование -- это ...

[ ]использование фабрик функций

[ ]смена реализации функции "на лету"

[X]возврат процедурного значения как результата процедуры

======= 73. Встраивание -- это ...

[x] когда формируем структуру данных постепенно с помощью кода

[ ] ленивые вычисления

[ ] когда объединяем данные и код
