### 21. JSON, XML и двоичные типы данных

JSON, XML и CSV – очень популярные текстовые форматы, в какой-то мере удобочитаемые для людей. Однако для них характерен ряд неочевидных проблем.

-- Кодирование чисел приводит к множеству неоднозначностей. В XML и CSV невозможно различать число и строку, состоящую из цифр.

-- JSON различает числа и строки, но не целочисленные значения и значения с плавающей точкой, не позволяет задать их точность, и в общем случае не поддерживает типы данных.

-- Существует также проблема больших чисел. Например, целые числа больше 253 невозможно точно представить в виде числа с плавающей точкой двойной точности в рамках стандарта IEEE 754, так что подобные числа становятся неточными при синтаксическом разборе в языках, использующих числа с плавающей точкой (например, JavaScript).

-- В JSON и XML хорошо поддерживаются строки символов в кодировке Unicode (доступный для чтения человеком текст), но не двоичные строки (последовательности байтов без кодирования символов). Но такие строки -- очень полезная практическая возможность, поэтому разработчики обходят это ограничение, кодируя двоичные данные как текст, закодированный с помощью Base64. Далее подразумевается, что такие значения должны интерпретироваться как кодировавшиеся с применением Base64. Это работает, но по сути является «костылём» и увеличивает объём данных на треть.


В XML и в принципе, в JSON, имеется дополнительная поддержка схемы (структуры данных). Языки схем в целом обладают немалыми возможностями, а потому весьма сложны в изучении и использовании. XML-схемы применяются довольно широко, а вот в отношении JSON многие утилиты и библиотеки схемами вообще не озабочиваются. Но так как правильная интерпретация данных (например, чисел и двоичных строк) зависит от содержащейся в схеме информации (по сути, от схемы типизации), приложениям, не задействующим схемы XML/JSON, приходится зашивать в код соответствующую логику кодирования/декодирования с самодельным учётом типов данным. А в формате CSV вообще нету никакой схемы, поэтому значение и смысл каждого столбца и строки приходится полностью определять самому приложению.

Поэтому всегда надо учитывать, что  **сложность интеграции модулей, подсистем или целых систем на уровне форматов данных часто перевешивает все остальные проектные проблемы** .


### Двоичное кодирование

JSON – гораздо менее «многословный» формат, нежели XML, но оба они используют немало места по сравнению с двоичными форматами. По этой причине было разработано много **двоичных кодировок для JSON** (MessagePack, BSON, BJSON, UBJSON, BISON, Smile …) и **для XML** (WBXML, Fast Infoset …). Эти форматы активно применяются в различных проектных нишах, но ни один из них не получил столь широкого распространения, как текстовые версии JSON и XML.


## JSON, XML и двоичные типы данных (задания)

======= 91. Самый многословный формат -- это ...

[ 1] XML

[ ] JSON

[ ] CSV

======= 92. Самый немногословный формат -- это ...

[ ] XML

[] JSON

[ 1] CSV

======= 93. Самый лучший формат в плане типов и схемы -- это ...

[ 1] XML

[ ] JSON

[ ] CSV

======= 94. Самый плохой формат в плане типов и схемы -- это ...

[ ] XML

[ ] JSON

[ 1] CSV

======= 95. Двоичное кодирование ...

[ ] компактно, поэтому применяется чаще тем текстовые форматы

[ ] одинаково популярно с текстовым

[ 1] слабо распространено
