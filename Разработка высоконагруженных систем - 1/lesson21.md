### 18. Хранилища данных

Интересно, сколь гибок оказался язык SQL: он работает при OLTP-запросах ничуть не хуже, чем при OLAP-запросах. Тем не менее в конце 1980-х -- начале 1990-х годов возникла тенденция создания так называемых  **хранилищ данных (data warehouse)** : компании прекращали использование OLTP-систем для целей аналитики и переносили анализ на отдельные специализированные БД.

На предприятии могут эксплуатироваться десятки различных систем обработки транзакций: системы, обслуживающие интерактивные сайты, системы управления POS-терминалами (подсчёт стоимости покупок) в оффлайновых магазинах, системы учета запасов на складах и планирования маршрутов для автомобилей, системы управления поставками, персоналом и т. д. Все эти системы сложны и требуют команды разработчиков для сопровождения, и эксплуатируются практически автономно друг от друга.

Обычно от OLTP-систем ожидается высокая доступность и обработка транзакций с низкой задержкой, поскольку они зачастую критичны для работы бизнеса. Администраторы БД, соответственно, старательно оберегают свои базы данных OLTP и обычно крайне неохотно разрешают бизнес-аналитикам выполнять произвольные аналитические запросы на этих базах. Ведь такие запросы как правило довольно сложны и зачастую оказываются очень ресурсоёмкими, подразумевают просмотр больших частей наборов данных, что может отрицательно сказаться на производительности выполняемых в этот момент транзакций.

Хранилище данных, напротив, представляет собой отдельную БД, которую аналитики могут опрашивать так, как им заблагорассудится, не влияя при этом на производительность OLTP-операций. Хранилище содержит предназначенную только для чтения копию данных из всех OLTP-систем компании. Данные извлекаются из баз OLTP с помощью выполнения периодических дампов данных или непрерывным потоком обновлений данных, преобразуются в удобный для анализа вид, очищаются и затем загружаются в хранилище. Такой процесс называется  **извлечение — преобразование — загрузка (extract — transform — load, ETL)** .

Хранилища специально оптимизируются под аналитические паттерны доступа. Оказывается, алгоритмы индексации, отлично работающие для OLTP, оказываются совсем не так хороши при выдаче ответов на аналитические запросы.

Модель хранилища данных чаще всего реляционная, поскольку SQL в целом отлично подходит для аналитических запросов. Существует множество графических утилит для анализа данных, которые генерируют SQL-запросы, визуализируют результаты и обеспечивают возможность аналитикам изучать данные с помощью таких операций, как  **углубление в данные или детализация (drill-down)** , а также  **продольные/поперечные, плоскостные и объёмные срезы (slicing and dicing)** .

Хранилища данных и реляционные базы данных OLTP выглядят похоже, поскольку и у тех и у других есть SQL-интерфейс для запросов. Однако внутреннее устройство этих систем как правило совершенно различное -- ведь они оптимизированы под совсем разные паттерны запросов.

*Примечание: сейчас существует множество проектов SQL на базе технологии **Hadoop** с открытым исходным кодом, которые достаточно успешно конкурируют с коммерческими системами хранилищ данных. Среди них Apache Hive, Spark SQL, Cloudera Impala, Facebook Presto, Apache Tajo, Apache Drill и др.*


## Хранилища данных (задания)

======= 67. Хранилище данных -- это ...

[ ] реляционная OLTP-система

[ 1] реляционная БД, оптимизированная под аналитические запросы

[ ] интеграция всех БД предприятия

======= 68. ETL -- это ...

[ 1] процесс подготовки данных для OLAP-хранилища

[ ] преобразование - извлечение — загрузка

[ ] загрузка - извлечение - преобразование

======= 69. В хранилищах хорошо работают такие технологии реляционных СУБД, как ...

[ ] индексы

[] GUI

[ ] опенсорс-системы

[1] SQL
