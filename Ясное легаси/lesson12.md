### Тестирование ООП-кода

32. Проблема. В конструкторе тестируемого объекта используется некий ресурс, к которому мы не можем получить доступ из средств тестирования.

Решение. Добавляем дополнительный конструктор (или меняем существующий), вынося внутреннюю зависимость на уровень его параметра.

### Тестирование ООП-кода

33. Проблема. Внутри конструктора создаётся большое количество разнотипных объектов или же выполняется обращение к большому количеству глобальных переменных, и получается слишком длинный список параметров.

Решение. Выясняем, какие именно глобальные переменные используются конструктором класса, чтобы установить их все в подходящее для тестирования состояние перед каждым тестом. Для этого создаём специально для тестов синглтон, в котором определяем например метод resetForTesting() (сбросить значения всех требуемых для тестирования глобальных переменных в подходящие состояния).

### Тестирование ООП-кода

34. Проблема. В каких случаях корректно применять шаблон проектирования Одиночка/Синглтон (гарантированно единственный экземпляр класса, или статический класс)?

Решение.

1. Проект моделирует реальный мир, в котором моделируемый объект присутствует только в одном экземпляре (например, Солнце, или главный герой в игре).
2. Если создаются два экземпляра одного и того же класса, то возможны серьёзные системные осложнения -- в частности, в программно-аппаратных комплексах, встраиваемых системах, и т. п.
3. Если создаются два экземпляра некоторого класса одновременно, то они используют слишком много ресурсов.

### Тестирование ООП-кода

35. Проблема. Идеальная ситуация для тестов, когда можно создать объект, явно вызвав его конструктор. Но зачастую объекты создаются трудно, так как каждый из них приходится устанавливать в нужное состояние. Для этого ему обычно требуется создать другие объекты, которые также должны быть установлены в правильное состояние, а тем объектам могут потребоваться ещё одни объекты, устанавливаемые в соответствующее состояние, и т. д. и т. п.

Решение.
Во-первых, рано или поздно обязательно найдётся хотя бы один класс, которому не потребуются объекты другого класса, и от которого можно начинать формирование тестовой группы объектов.
Во-вторых, не исключено, что многие (а может, и все) из этих объектов непосредственно на задачу тестирования конкретного метода никакого влияния не оказывают. В таком случае можно передавать пустые объекты или null. А если от них требуется некоторое рудиментарное поведение, то можно воспользоваться извлечением интерфейса и созданием класса-наследника.

### Тестирование ООП-кода (задания)

======= 30. В конструкторе тестируемого объекта используется объект, к которому нету доступа.

[ ] находим исходный объект, от которого зависит недоступный объект

[ 1] выносим внутреннюю зависимость на уровень параметра конструктора

[ ] создаём синглтон для установки начальных значений глобальных переменных

======= 31. Внутри конструктора создаётся большое количество разнотипных объектов.

[ ] находим исходный объект, от которого зависит недоступный объект

[ ] выносим внутреннюю зависимость на уровень параметра конструктора

[ 1] создаём синглтон для установки начальных значений глобальных переменных

======= 32. В каких случаях некорректно применять шаблон Одиночка?

[ ] два экземпляра конфликтуют на системном уровне

[ ] моделируемый объект присутствует только в одном экземпляре

[ 1] в конструкторе создаётся большое количество разнотипных объектов

[ ] два экземпляра используют слишком много ресурсов.
