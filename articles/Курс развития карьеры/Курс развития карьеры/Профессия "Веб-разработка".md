## Веб-разработка

Сразу скажу, что я не большой поклонник направления веб-разработки. Хотя я сам участвовал в нескольких довольно крупных веб-проектах, сами используемые технологии скорее разочаровывают. По сравнению с разработкой приложений для настольных компьютеров или мобильных приложений, веб-разработка сложнее, или даже, точнее, труднее и запутаннее. Очень много нюансов, которые выявляются лишь в процессе практики, причём сами технологии быстро меняются.

Если вы создаете приложение для Windows, вы можете использовать .NET. Если вы программируете для Android, вы используете Java или Kotlin. Но в любом случае вы знаете, какую версию какой операционной системы вы поддерживаете, какой язык программирования и какие стандартные библиотеки доступны.

Однако с веб-разработкой всё по другому. У вас нету хорошего контроля над средой выполнения, потому что надо поддерживать минимум три-четыре браузера: Microsoft Internet Explorer/Edge, Google Chrome, Firefox, а также Apple Safari, если среди ваших пользователей много американцев, где популярны Маки. Существует множество других "младших" вариантов -- например Opera, а также версии браузеров для мобильных устройств, "веб"-телевизоры, игровые приставки с доступом в интернет, и многое другое. И тут крайне сложно предсказать, где ваш код сломается.

Кроме того, на практике люди пользуются самыми разными версиям всех этих браузеров, среди которых много устаревших.

Веб-разработка сложна, потому что каждый из этих разных браузеров и версий браузеров может поддерживать разные функции и вести себя совсем не так, как ожидается.

Но вы как программист должны знать о веб-разработке по крайней мере, основы. Потому что фактически большинство разработчиков сегодня занимаются веб-разработкой. Постепенно всё больше технологий уходят в облака, и доступ клиентов к своим сервисам через браузеры становится стандартом.

Даже в условиях быстрого развития мобильной разработки веб-разработка по-прежнему занимает главное место, потому что проще создавать программы не конкретно для Android или iOS, а кросс-платформные приложения в формате веб-приложений, которые работают в "любом" браузере.

Поэтому важно иметь хотя бы минимальное представление о веб-разработке.

### Введение

"Внутри" веб-разработка постоянно меняется наверное каждый год, но сама концепция не меняется: веб-разработка -- это создание приложений, которые работают в веб-браузере. Очень многие из таких приложений связаны с логикой, живущей на веб-сервере, который формирует HTML + CSS + JavaScript код, исполняющийся в браузере. Схем здесь много -- начиная с простейшей, когда сервер хранит простые статические скрипты (например, на PHP), которые вызываются, когда браузер запрашивает конкретную страничку, формируют её, и она запускается и работает уже на клиенте, до самых современных, когда "рендеринг" клиентской странички выполняется тоже на сервере, и браузер получает сильно оптимизированную версию.

Но независимо от выбранной схемы, основные технологии всё те же: HTML, CSS и JavaScript. И затем железное терпение для тестирования своего кода на всех веб-браузерах, которые вам обязательно придётся поддерживать.

Для создания целостного веб-приложения однако разработчики используют практически все основные языки программирования. Пользовательский интерфейс веб-приложения -- это простой текст, содержащий код HTML и CSS, который может быть сгенерирован фактически любым языком программирования.

JavaScript -- это язык программирования, который встраивается в HTML-код и исполняется непосредственно в браузере. Для этого используется так называемый DOM (объектная модель документа). DOM -- это программный интерфейс к содержимому веб-странице в браузере, который можно использовать для непосредственного изменения этого содержимого, его структуры и т. д. Раньше DOM-модели в разных браузерах были несовместимы друг с другом, но сегодня к счастью DOM стандартизирован.

### Как работает веб-система

Трудно понять, что такое веб-разработка, если у вас нет хотя бы общего представления о том, как работает типичная веб-система, да и сам Интернет.

Основные функциональные возможности Сети и лежащих в её основе технологии в основном остались прежними.

Прежде всего, у нас есть браузер.

Браузер может загружать и отображать код HTML и CSS в визуальном формате, и такой код мы называем веб-страницей.

Браузер также способен выполнять скрипты на JavaScript, которые добавляют динамики и пользовательский интерфейс, обрабатывают вводимые пользователем данные, а также при необходимости изменяют структуру веб-страницы.

Браузер должен отправить запрос на веб-сервер, чтобы получить веб-страницу для отображения. Когда вы вводите в браузере адрес страницы конкретного сайта, браузер обращается к веб-серверу за этой конкретной страницей. Запрос выполняется с помощью протокола HTTP или Hypertext Transfer Protocol.

Когда запрос конкретного ресурса (URI, универсальный идентификатор ресурса) отправляется на веб-сервер, этот веб-сервер находит у себя запрошенный контент (если он существует) и отправляет ответ браузеру.

Затем браузер анализирует и обрабатывает этот ответ, и показывает результат конечному пользователю.

Очевидно, что под покровом веб-сервера и браузера происходит гораздо больше всего, но основная идея заключается в том, что браузер делает запрос, а веб-сервер отвечает, возвращая код, содержащий HTML, CSS и JavaScript.

Почему это важно понимать, если вы хотите заниматься веб-разработкой? Потому что веб-приложение должно восприниматься немного иначе, нежели обычное настольное или мобильное приложение.

В обычном приложении вы можете хранить любые данные в памяти и получать доступ к ним при переключении между экранами или формами приложения.

В веб-приложениях всё по другому: базовый протокол HTTP не имеет состояния. Из-за этого веб-приложение (клиентская часть) должно постоянно отправлять запросы на сервер, в общем случае, по каждому важному действию, которое происходит в приложении и как-то меняет его состояние.

Это также означает, что у вас должен быть некоторый способ управления состоянием приложения между запросами и механизм отслеживания пользователей, которые одновременно используют веб-приложение.

Существуют различные технологии и фреймворки, упрощающие эти моменты, но важно понимать, что веб-разработка сильно отличается от других видов разработки из-за отсутствия HTTP-состояния и наличия постоянных взаимодействий между клиентами (их много) и сервером.

С таким сложным процессом программирования и сложной в управлении средой исполнения естественно заинтересоваться, а как он в таком виде сформировался.

### Краткая история Сети

На эту тему написаны тысячи статей, но давайте вкратце рассмотрим историю веб-технологий с точки зрения программиста.

Ранняя веб-разработка заключалась в создании статических HTML-страниц, а навигация осуществлялась с использованием гиперссылок. Это на самом деле не было создание "приложения". Сайт состоял из набора статических веб-страниц, которые содержали контент и, возможно, несколько картинок, и всё это было связаны гиперссылками.

Все было довольно скучно, и быстро возникла потребность в добавлении в веб-страницы интерактивности. Очень востребованной была возможность разнообразной визуализации различного содержимого и отслеживания состояний. Чтобы, например, браузер помнил, что этот конкретный посетитель -- Олег, и ему совершенно по-другому отрисовывал бы веб-страницу, нежели другим пользователям.

Технология под названием CGI (Common Gateway Interface) использовалась при создании самых ранних веб-приложений. Эти приложения могли генерировать HTML-код на основе данных (запросов), которые браузер отправляет на сервер. Но это было весьма сложно, потому что требовалось программно анализировать запрос, пришедший от браузера, и генерировать оригинальный ответ, придерживаясь требований протокола HTTP и выдавая корректный HTML.

С появлением фреймворков веб-разработки ситуация упростилась. Некоторые из ранних веб-фреймворков (ColdFusion или ASP) облегчали CGI-программирование и динамическое создание HTML-страниц -- с помощью специальных тегов, разметки, шаблонов логики. Порог входа в веб-разработку существенно снизился, и в результате огромное количество программистов смогли создавать настоящие веб-приложения. Точнее, такая профессия стала называться "веб-мастер".

Но потребность в повышении интерактивности веб-страниц только выросла -- клиенты быстро распробовали первые интересные веб-сервисы, и стали требовать ещё.

И через некоторое время веб-разработчики начали использовать JavaScript для расширения возможностей клиентской части веб-приложений. Почти одновременно в моду вошла технология CSS (каскадные таблицы стилей), которые упростили создание крупных красивых сайтов. HTML стал ответственным за контент, а CSS -- за формат, макет, стиль этого контента.

Однако запрос на интерактивность и даже ещё более крутые возможности по-прежнему находился в топе потребностей пользователей.

Рендеринг больших и сложных страниц на сервере выполнялся медленно, поэтому были придуманы такие технологии, как AJAX (асинхронный JavaScript и XML), позволяющие динамически обновлять веб-страницы без перезагрузки. В конечном итоге веб-приложения целиком создавались динамически, без какого-либо ручного обновления страницы. Эти типы веб-приложений известны как SPA (Single Page Applications), одностраничники.

Общий тренд таков, что Сеть будет становиться все более похожей на классические настольные приложения (Windows-программы), а веб-браузер будет походить на операционную систему. Например, Google создал целую веб-ОС Chrome OS, в которой сама ОС по сути -- это браузер Chrome.

В последние годы очень активно развивается технология WebAssembly (см. ниже), позволяющая разворачивать в браузере полноценные графические приложения (как и настольные), и скорее всего она станет основой для интернета будущего.

### Ключевые веб-технологии

**HTML**

Это сегодня фундамент веб-разработки. HTML -- основной строительным блок, и вся веб-разработка в конечном итоге основывается на нем (хотя возможно в будущем WebAssembly станет такой же популярной, как и HTML).

Вы можете создать веб-приложение, используя только HTML -- хотя на самом деле это будет скорее просто веб-страница. HTML (язык гипертекстовой разметки), используется для создания её содержимого и структуры. HTML состоит из серии тегов, которые определяют части и компоненты веб-страницы. Например, вы можете использовать тег img для встраивания изображения в страницу. Вы можете использовать тег h1 для создания заголовка, или задать гиперссылку с помощью a, и т. д.

Существуют десятки часто используемых тегов, ну и менее используемые теги, для структурирования и организации содержимого документа.

Браузер анализирует HTML-разметку и использует её вместе с CSS и JavaScript для отображения веб-страницы.

**CSS**

HTML до появления CSS использовался и для разметки содержимого и структуры веб-страницы, и для определения способа ее отображения и оформления. Это была большая проблема, потому что для того, чтобы изменить стиль веб-приложения (например, изменить цвета всех кнопок или размер шрифта), придётся править HTML-код во многих местах. CSS и был придуман для решения этой проблемы -- через чёткое разделение содержимого веб-страницы от её визуального стиля (хотя местами они пересекаются).

CSS (каскадные таблицы стилей) можно связать с веб-страницей, и тем самым задать стиль представления этой веб-страницы.

Всё веб-приложение связывается с набором страниц CSS, которые задают стиль для всего веб-приложения. И если вы хотите изменить цвет кнопки, достаточно просто изменить один файл CSS, и все кнопки во всём веб-приложении изменятся. Кроме того, CSS представляют весьма развитые механизмы разнообразной красивой визуализации.

Но и у CSS есть немало ограничений. Написание CSS-кода может быть непросто, и его надо хорошо организовать, чтобы другие разработчики понимали, что делается. CSS (как и HTML) -- это не язык программирования, и он не поддерживает переменные или функции. Поэтому например спецификацию конкретного цвета придется повторять везде, где вам нужно, хотя переменная подошла бы куда лучше. Аналогично придётся повторять размеры границ, интервалы и многое другое. В будущем в CSS, как обещано, появятся и такие возможности, но это будет ещё нескоро. Конечно, CSS код можно генерировать на сервере программно, и тогда задача упрощается.

**JavaScript**

JavaScript, впервые появившись, сперва использовался для совсем простых задач, но очень быстро завоевал мировое признание.

По сути, JavaScript -- это полнофункциональный динамический язык, код на котором исполняется непосредственно в браузере. Он может напрямую взаимодействовать с моделью DOM, добавлять, удалять и изменять контент веб-страницы. Он может добавлять, удалять и изменять CSS, чтобы изменить внешний вид и форматирование веб-страницы. На нём также можно реализовывать любую логику -- прямо в браузере -- и создавать деловые приложения, игры, визуальные эффекты, анимацию и много-много других вещей. С помощью JavaScript, через манипуляцию DOM и CSS, можно программно полностью изменить всю структуру и стиль веб-страницы. И все это происходит непосредственно в браузере (если только вы не используете технологию наподобие Node.js, которая выполняет JavaScript-код на сервере). Это называется рендерингом на стороне клиента в браузере.

Есть немало ограничений для запуска JavaScript-кода в браузере, однако самым существенным из них будут сами браузеры, которые вы должны поддерживать. Некоторые браузеры могут не поддерживать какие-то функции JavaScript, и тогда вам придётся перенести формирование HTML-кода на веб-сервер. Это называется рендерингом на стороне сервера.

Однако различия между этими двумя видами рендеринга бывают довольно запутанными.

**Рендеринг на стороне сервера (SSR, Server-Side Rendering)**

Самая простая модель веб-разработки подразумевает, что все веб-страницы формируются на сервере, после чего HTML + CSS + JavaScript код этой страницы отправляется в браузер, где он анализируется и отображается. Рендеринг на стороне сервера означает, что веб-страницы почти полностью строятся с помощью серверной логики.

Самые популярные веб-технологии (ASP.NET или PHP) по-прежнему используют этот подход. При этом различные промежуточные шаги (например, загрузка и инициализация стороннего JavaScript-кода) в последних вариантах SSR также выполняются на сервере, в результате чего браузер получает уже быстрый и хорошо оптимизированный код. Фактически часть рендеринга на стороне клиента переносится на сервер.

**Рендеринг на стороне клиента**

Одно время в связи с увеличением производительности и возможностей браузеров и движков JavaScript наблюдалось движение к называемому рендерингу на стороне клиента -- когда существенная часть содержимого веб-страницы создается в браузере с помощью JavaScript.

Однако сегодня снова наблюдается движение "обратно" к SSR, так как клиентская логика продолжает усложняться, всё больше пользователей заходят на сайты с мобильных устройств, нередко довольно слабеньких, поэтому перенос рендеринга по максимуму на сервер весьма востребован.

**Аналоги**

JavaScript довольно справедливо подвергается критике, и ошибки в веб-приложениях из-за плохого клиентского кода встречаются часто. Но хотя разработано много альтернатив JavaScript, но ни одна из них не жизнеспособна.

В общем случае, можно программировать на других языках, код на которых просто компилируется обратно в JavaScript перед запуском в браузере. Это например CoffeeScript, TypeScript, Babel, Elm, Dart и даже функциональные языки наподобие ClojureScript. Некоторые из этих языков предназначены для самостоятельной работы непосредственно в браузере (например, Dart), но большинство из них ориентированы на компиляцию в JavaScript перед запуском. Просто знайте, что какой бы язык программирования вы ни выбрали для написания клиентской логики вашего веб-приложения, скорее всего, он все равно будет скомпилирован в JavaScript.

При рендеринге на стороне клиента вы почти можете не думать о том, как веб-сервер доставляет «приложение» в браузер, и браузер выполняет это приложение для внутреннего отображения страниц, создания навигации и запроса любых дополнительных данных с сервера.

Рендеринг на стороне клиента в некоторых случаях однако может выглядеть более плавным, потому что в фоне не происходит обмена запросами с сервером для отображения нового содержимого. Редкие запросы обращаются лишь за данными, которые затем "подключаются" к текущей веб-странице динамически. Подобные клиентские приложения называются SPA или одностраничниками. Есть только одна страница, и содержимое этой страницы динамически обновляется.

На практике в одном веб-приложении объединяются оба метода, и одни части пользовательского интерфейса формируются сразу на стороне клиента, а другие части готовятся на стороне сервера. Но практически всегда есть контент, который визуализируется в браузере, но сам он существует в серверных процессах, которые доступны через HTTP API.

### APIs

В навыки веб-программиста сегодня обязательно входит понимание API и умение с ними взаимодействовать (API -- интерфейс прикладного программирования).

API, используемый в веб-разработке -- это просто спецификация вызовов, или команд, которые одна программа шлёт другой, чтобы получить какие-то данные или приказать ей что-то сделать.

Обычно одностраничники активно используют API для переправки данных туда и обратно. Это полезно например в клиентском рендеринге, потому что веб-приложению нужно посылать и получать данные и взаимодействовать с серверной логикой.

Рендеринг на стороне сервера выполняется до того, как HTML-код отправляется в браузер, поэтому веб-приложение просто получает сразу все необходимые данные, пока оно готовится на сервере.

При рендеринге на стороне клиента приложение выполняется в браузере, поэтому ему требуется явный способ связи с сервером. Для этого и нужен API.

Это обширная тема, но просто имейте в виду, что большая часть веб-разработки приходится на программирование клиент-серверного взаимодействия через API (веб-API).

### WebAssembly

WebAssembly -- это пока совсем молодая технология, и тем не менее она за считанные годы стала поддерживаться всеми ведущими производителями браузеров, и хороший стандарт был сразу выработан международным консорциумом по стандартизации W3C.

WebAssembly в некотором смысле похож на флеш или java-апплеты, запускающиется в браузерах -- популярные ещё 10-15 лет назад технологии. Только в основу WebAssembly были сразу заложены весьма сильные инженерные идеи -- например, переносимое абстрактное синтаксическое дерево, промежуточное представление кода, обработанного компилятором. Таким образом можно программировать на самых разных языках, и получать на выходе код на WebAssembly.

WebAssembly -- это компактный двоичный код с очень хорошим уровнем безопасности, который исполняется в виртуальной машине и в браузере, и автономно фактически уже в любой ОС. На WebAssembly можно разрабатывать полноценные приложения с графическим интерфейсом, включая и 3D-графику, и эта очень хорошо продуманная технология в ближайшие годы с высокой вероятностью станет альтернативой JavaScript.

---

Это были самые основы веб-разработки -- именно самые основы. Мы не говорили о том, почему HTTP не использует состояния, не говорили про кэширование, базы данных, масштабируемость, парсинг, а также о многих-многих фреймворках и системах, используемых для всего этого.

Если вы решите стать веб-разработчиком, то да, вам нужно будет знать это всё, но, надеюсь, сейчас вы получили хорошее общее представление.
