## 11. Графоподобные/графовые модели данных

Как мы выяснили, иерархические модели совсем плохо подходят для связей «многие-ко-многим», однако и реляционная модель позволяет иметь дело лишь с простыми случаями «многие-ко-многим». По мере роста сложности взаимосвязей внутри данных их моделирование в виде графа будет гораздо более естественным и продуктивным.

Графы состоят из двух типов объектов:  **вершин (vertice)** , известных также как **узлы (node)** или  **сущности (entity)** , и  **рёбер (edge)** , известных также как **связи (relationship)** или  **дуги (arc)** .

В виде графа можно смоделировать множество типов данных. Однако использование графов не ограничивается однородными (homogeneous) данными: графы предоставляют ничуть не меньшие возможности хранения в одном хранилище данных различных типов объектов.

Например, Facebook поддерживает единый граф с множеством различных типов вершин и рёбер: вершины означают людей, местоположения, события, входы в систему и написанные пользователями комментарии; рёбра указывают, какие люди являются друзьями, где произошел конкретный вход в систему, кто какое сообщение прокомментировал, кто какое мероприятие посетил и т. д.

Графовое хранилище можно представить как состоящее из двух реляционных таблиц. Одна таблица отводится для вершин, вторая для ребер (edges). Для хранения свойств вершин и рёбер используется, например, тип данных json. Для каждого ребра хранится информация о начальной head_vertex и конечной tail_vertex вершине, так что при необходимости можно быстро получить множество входящих или исходящих ребер для данной вершины -- запросить поля head_vertex и tail_vertex соответственно из таблицы edges.

Некоторые важные аспекты такой модели:

1. Любая вершина может быть соединена ребром с любой другой вершиной. Схема не накладывает ограничения на то, какие элементы могут быть связаны.
2. Для любой вершины можно найти как ее входящие, так и исходящие рёбра и таким образом выполнить обход графа: найти путь по цепочке вершин -- как в прямом, так и в обратном направлении (поэтому в таблице edges есть индекс как на столбце tail_vertex, так и на столбце head_vertex).
3. Задействуя различные метки для разных видов связей, можно хранить в одном графе несколько разных видов информации, сохраняя при этом чистоту модели.

Графы удобны своими возможностями расширения: по мере добавления в приложение новых свойств можно легко расширить граф, учитывая изменения в структурах данных приложения.

Таким образом современные нереляционные хранилища данных NoSQL делятся на две основные большие разновидности.

1. **Документоориентированные БД** предназначены для сценариев использования, когда данные поступают в виде отдельных документов, и связи между документами редки.
2. **Графовые БД** предназначены для противоположных сценариев применения, когда любые данные потенциально могут быть взаимосвязаны.

И существует ещё один особый вид модели данных, часто используемый в БД --  **полнотекстовый поиск** .


## Графовые модели данных (задания)

======= 32. Графовая модель хороша, когда...

[ ] много таблиц

[ ] много документов

[ 1] много связей

[ ] много текста

======= 33. Графовые БД состоят из двух типов объектов:

[ ] рёбра и связи

[ ] дуги и рёбра

[ 1] вершины и рёбра

[ ] вершины и узлы

[ ] сущности и вершины

======= 34. Обход графа в графовых БД эффективен, потому что...

[ 1] хранятся входящие и исходящие рёбра

[ ] есть индексы для столбцов tail_vertex и head_vertex

[ ] поддерживаются метки для разных видов связей

[ ] отсутствуют ограничения на связность узлов
