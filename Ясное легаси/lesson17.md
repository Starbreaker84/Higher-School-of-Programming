### Если в легаси обнаруживаются ошибки

51. Проблема. Когда приходится применять некоторую функцию или метод, уже давно имеющиеся в унаследованной системе, любое их использование может быть потенциально опасным: в них вполне могут быть ошибки.

Решение. Проверьте, имеются ли для этого метода/функции тесты, и если нет, то просто напишите их. Во-первых, вы разберётесь в "интерфейсе" этого метода (обязательно познакомьтесь с его исходным кодом), и во-вторых, чуть-чуть улучшите систему в целом, добавив в неё очередную маленькую полуформальную спецификацию.


### Если в легаси обнаруживаются ошибки

52. Проблема. В ходе разбирательства с легаси-кодом периодически обнаруживаются ошибки, которые по каким-то причинам не были выявлены пользователями, или они о них знают, но терпят, или сам модуль с ошибочным кодом устарел и не используется, и т. д. Что с ними делать?

Решение. it depends... Прежде всего необходимо выяснить вероятность зависимости каких-то других компонентов от выявленного ошибочного поведения. Не возникнет ли потенциально цепная реакция? Или можно пока отложить в долгий ящик (раньше не было никогда, авось и не случится)?

В идеале, конечно, правильный подход -- это устранять ошибки сразу же, едва они были выявлены. Но на практике, совсем не факт, что тимлид даст на это время. В любом случае, как минимум оформите тикет с подробным описанием ошибки, чтобы любой другой разработчик мог её быстро воспроизвести, и напишите соответствующий тест, завершающийся фейлом.


### Если в легаси обнаруживаются ошибки

53. Проблема. Не всегда удаётся однозначно определить, действительно ли неправильно некоторое подозрительное поведение.

Решение. В любом случае соответствующую логику надо покрыть тестом, а затем постараться "усугубить" -- довести до реальной ошибки. Очень важно как можно быстрее выяснить, будет ли такое подозрительное поведение действительно ошибочным.


### Если в легаси обнаруживаются ошибки (задания)

======= 44. В легаси-коде обнаружена ошибка. Что делать в первую очередь?

[ ] устранить ошибку сразу же

[ ] выяснить зависимость других компонентов от выявленной ошибки

[ 1] сделать тест, демонстрирующий баг

======= 45. Непонятно, является ли некоторое подозрительное поведение ошибочным. Что делать в первую очередь?

[ ] "усугубить" до реальной ошибки

[ ] выяснить зависимость других компонентов от подозрительного поведения

[1 ] сделать тест, демонстрирующий подозрительное поведение
