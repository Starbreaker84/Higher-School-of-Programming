## 8. Схемы баз данных

Большинство документоориентированных БД, а также реляционные БД с поддерж¬кой JSON не навязывают какой-либо **схемы, определяющей единую структуру данных в документах** (например, структуру таблиц в РСУБД). Даже для поддержки XML в реляционных БД проверка схемы обычно необязательна. Это означает, что в документ можно добавлять произвольные ключи и значения, и при чтении документов не даётся никаких гарантий и пояснений, какие поля какие документы содержат.Документоориентированные БД по этой причине обычно называют  **бессхемными (schemaless) или неструктурированными** . Хотя конечно у документов в базе всё равно будет определенная структура -- то есть какая-то неявная схема имеется, но она не навязывается явно. В этом есть и плюсы, и минусы.

Более точным названием бессхемного подхода будет  **schema-on-read (схема при чтении)** : структура данных неявна и их интерпретация происходит при чтении из БД. А вот **schema-on-write (схема при записи)** -- это традиционный подход реляционных БД, при котором имеется явная схема и база гарантирует, что все записываемые данные ей соответствуют.

Схема при чтении аналогична динамической (во время выполнения) проверке типов данных в языках программирования, в то время как схема при записи аналогична статической (во время компиляции) проверке типов. Аналогично тому, как сторонники статической и динамической проверки типов жарко спорят об их относительных достоинствах и недостатках, навязывание схемы в базе данных -- спорный вопрос, и в целом на него не существует правильного или неправильного ответа.

Подход «схема при чтении» предпочтителен, если структура элементов набора заведомо различается по какой-либо причине (то есть данные разнородны), например:

- существует множество различных типов объектов, и нет смысла помещать каждый из них в отдельную таблицу;
- структура данных определяется внешними системами, не подконтрольными вам и способными изменяться с течением времени.


## 9. Локальность данных и запросы

Документы обычно хранятся в базе в виде единых непрерывных строк, закодированных (сериализованных) в формат JSON, XML или их двоичную разновидность (например, формат BSON базы данных MongoDB). Если приложению постоянно требуется доступ ко всему документу (например, для представления веб-страницы), то локальность данных даёт определенные преимущества: одним запросом можно получить всю иерархическую структуру. Если данные разбиты по нескольким таблицам, то понадобится несколько запросов, поисков по индексу для полного их извлечения, что потребует больше операций дискового поиска и займет больше времени.
Но локальность даёт преимущество только тогда, когда требуется получить большие части документа за один раз. Базе данных обычно приходится загружать весь документ целиком, даже если вам нужен только маленький его фрагмент, что в случае больших документов становится неэкономным.

При обновлении документа, как правило, необходимо тоже переписать весь документ целиком — легко выполнить «на месте» можно только те обновления, которые не меняют размер закодированного документа. Поэтому в большинстве случаев рекомендуется минимизировать размер документов и избегать увеличивающих этот размер операций записи.

К сожалению, вышеприведённые ограничения по производительности значительно снижают диапазон случаев, когда документоориентированные БД могут оказаться существенно полезнее реляционных. По этой причине реляционные и документоориентированные БД становятся все более схожими, поддерживают сильные моменты дружеских технологий, и это хорошо: их модели данных хорошо дополняют друг друга. Представляется, что будущее -- за гибридами реляционной и документной моделей.


## Схемы и локальность данных (задания)

======= 26. Когда схемы не нужны?

[ ] в реляционной СУБД

[1 ] в документоориентированной СУБД

[ ] в обоих

[ ] нужны везде

======= 27. Традиционная реализация schema-on-read и schema-on-write -- это...

[ ] структура данных неявна при чтении и записи

[1 ] структура данных неявна при чтении и явна при записи

[ ] структура данных явна при чтении и неявна при записи

[ ] структура данных явна при чтении и записи

======= 28. Будущее моделей данных

[ ] за реляционными СУБД

[ ] за NoSQL

[1 ] за их гибридом

[ ] за AI
