Важно, что RPC-клиенты и серверы могут модифицироваться и развертываться независимо друг от друга. По сравнению с потоками данных, проходящих через БД, потоки данных через сервисы можно «обновлять» раздельно: сперва серверы, а потом клиенты. Следовательно,  **необходима только обратная совместимость по запросам и прямая совместимость по ответам** .

Свойства обратной и прямой совместимости RPC-схема наследует от используемого ею формата кодирования.

Эволюция RPC (в частности, gRPC и Avro) возможна по правилам совместимости соответствующего формата кодирования.

В протоколе SOAP запросы и ответы описываются с помощью XML-схем. Эволюция этих схем возможна, но есть ряд технических проблем.

Реализации REST API для ответов сервера чаще всего используют формат JSON (без формального описания схемы), а для запросов -- либо JSON, либо кодированные URI или параметры запроса. Для поддержки совместимости обычно добавляются необязательные параметры запроса и новые поля в объекты ответов.

Обеспечение совместимости сервисов усложняется тем, что RPC часто применяется для взаимодействия между предприятиями (крупными корпоративными системами разных марок), поэтому поставщики сервисов часто не могут никак повлиять на клиентов и заставить их обновиться. Следовательно, необходимо поддерживать совместимость в течение длительного времени (вероятно, до бесконечности). Если возникают изменения, нарушающие совместимость, то поставщику сервиса часто приходится поддерживать одновременно множество версий API сервиса.


### RPC или REST?

Пользовательские протоколы RPC с двоичным форматом кодирования иногда могут оказаться более производительными, чем универсальные -- например, JSON поверх REST. Однако у реализаций REST API есть другие преимущества:

- они хорошо подходят для экспериментирования и отладки,
- к ним можно выполнять запросы просто через браузер или утилиту командной строки curl без какой-либо генерации кода или установки дополнительного программного обеспечения,
- они поддерживаются всеми основными языками программирования и платформами.
  Кроме того, для архитектурного стиля REST существует обширная экосистема вспомогательных утилит (серверов, кэшей, балансировщиков нагрузки, прокси, брандмауэров, утилит мониторинга, отладки, утилит для тестирования и др.).

Поэтому  **REST сегодня -- ведущий стиль построения общедоступных API** .

RPC-фреймворки сосредоточены в основном на запросах, выполняемых между сервисами, принадлежащими одной организации, обычно в пределах одного ЦОДа (фактически между серверами).


## Эволюция RPC (задания)

======= 114. Как развёртываются RPC-клиенты и серверы?

[ ] прямая совместимость по запросам и прямая совместимость по ответам

[ ] прямая совместимость по запросам и обратная совместимость по ответам

[ 1] обратная совместимость по запросам и прямая совместимость по ответам

[ ] обратная совместимость по запросам и обратная совместимость по ответам

======= 115. Эволюция RPC зависит от ...

[ 1] правил совместимости соответствующего формата кодирования

[ ] правил эволюции схем

[ ] расширенных запросов и ответов в формате JSON

======= 116. RPC или REST

[ ] RPC лучше REST из-за двоичного формата кодирования

[1 ] REST лучше RPC, так как проще и универсальнее
