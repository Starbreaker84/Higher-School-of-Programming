## 7. Рекурсия

Рекурсия подразумевает использование имени определяемой функции внутри её самой (внутри её определения).

Ключевое слово rec, указываемое следом за операцией связывания let, разрешает (рекурсивное) использование последующего идентификатора в определяющем его правом выражении.

```
let rec factorial = function 
 | 0  -> 1
 | n  -> n * factorial(n - 1)

printfn "%d" (factorial 5) // 120
```

Вычисление функции может завершиться неуспешно: не хватит памяти при вычислении большого числа, или возникнет арифметическое переполнение, или сама программа зациклится; способы обхода этой проблемы рассматриваются далее.

```
printfn "%d" (factorial -1)
// Process is terminated due to StackOverflowException
```

**7.1. Задания.**

7.1.1. Напишите рекурсивную функцию fibo: int -> int, где fibo(n) вычисляет n-е число Фибоначчи (n >= 0, fibo(0)=0, fibo(1)=1, ...). Последовательность Фибоначчи начинается с двух значений 0,1, а n-й элемент равен сумме n-1 - го и n-2 - го элементов: 0,1,1,2,3,5,8,13,...

7.1.2. Напишите рекурсивную функцию sum: int -> int, где sum(n) вычисляет сумму первых n чисел ряда 1 + 2 + 3 + ... + n-1 + n

7.1.3. Напишите рекурсивную функцию sum2: int * int -> int, где sum2(m, n) вычисляет сумму m + m+1 + ... + m+(n-1) + m+n, где m >= 0 и n >= 0.
Используйте шаблоны (m,0) и (m,n).

Шаблон для отправки на сервер:

```
// 7.1.1
let rec fibo = ...

// 7.1.2
let rec sum = ...

// 7.1.3
let rec sum2 = function 
 | (m,0) -> ... 
 | (m,n) -> ...
```

**[[ предыдущее ]](https://skillsmart.ru/fp/fsh/c87d719a8e.html)**

---

**Ответы на задания 6.5**

```
let days_in_month = function 
    | 1 | 3 | 5 | 7 | 8 | 10 | 12 -> 31
    | 4 | 6 | 9 | 11 -> 30
    | 2 -> 28
    | _ -> 0
```
